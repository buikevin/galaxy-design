import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import {
  CardComponent,
  CardHeaderComponent,
  CardTitleComponent,
  CardDescriptionComponent,
  CardContentComponent,
} from '../../components/ui/card';
import {
  AlertComponent,
  AlertTitleComponent,
  AlertDescriptionComponent,
} from '../../components/ui/alert';
import { toast } from '../../components/ui/toast';
import {
  RdxTooltip,
  RdxTooltipTrigger,
  RdxTooltipContentWrapper,
  RdxTooltipContent,
} from '@radix-ng/primitives/tooltip2';
import {
  RdxDialogTriggerDirective,
  RdxDialogContentDirective,
  RdxDialogTitleDirective,
  RdxDialogDescriptionDirective,
  RdxDialogCloseDirective,
} from '@radix-ng/primitives/dialog';
import { ButtonComponent } from '../../components/ui/button';
import { SeparatorComponent } from '../../components/ui/separator';

@Component({
  selector: 'app-feedback',
  standalone: true,
  imports: [
    CommonModule,
    CardComponent,
    CardHeaderComponent,
    CardTitleComponent,
    CardDescriptionComponent,
    CardContentComponent,
    AlertComponent,
    AlertTitleComponent,
    AlertDescriptionComponent,
    RdxTooltip,
    RdxTooltipTrigger,
    RdxTooltipContentWrapper,
    RdxTooltipContent,
    RdxDialogTriggerDirective,
    RdxDialogContentDirective,
    RdxDialogTitleDirective,
    RdxDialogDescriptionDirective,
    RdxDialogCloseDirective,
    ButtonComponent,
    SeparatorComponent,
  ],
  template: `
    <div class="space-y-6">
      <div>
        <h1 class="text-3xl font-bold">Feedback Components</h1>
        <p class="text-gray-500 mt-2">Alerts, dialogs, toasts, and tooltips</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Alert Examples -->
        <ui-card>
          <ui-card-header>
            <ui-card-title>Alert</ui-card-title>
            <ui-card-description>Static notification messages</ui-card-description>
          </ui-card-header>
          <ui-card-content class="space-y-4">
            <ui-alert>
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M12 16v-4"></path>
                <path d="M12 8h.01"></path>
              </svg>
              <ui-alert-title>Info</ui-alert-title>
              <ui-alert-description>
                This is an informational alert message with an icon.
              </ui-alert-description>
            </ui-alert>

            <ui-alert variant="destructive">
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
              </svg>
              <ui-alert-title>Error</ui-alert-title>
              <ui-alert-description>
                Something went wrong. Please try again later.
              </ui-alert-description>
            </ui-alert>

            <ui-alert class="border-green-500 text-green-700">
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
              </svg>
              <ui-alert-title>Success</ui-alert-title>
              <ui-alert-description>
                Your changes have been saved successfully!
              </ui-alert-description>
            </ui-alert>

            <ui-alert class="border-yellow-500 text-yellow-700">
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
              </svg>
              <ui-alert-title>Warning</ui-alert-title>
              <ui-alert-description>
                Please review your information before proceeding.
              </ui-alert-description>
            </ui-alert>
          </ui-card-content>
        </ui-card>

        <!-- Dialog Examples -->
        <ui-card>
          <ui-card-header>
            <ui-card-title>Dialog</ui-card-title>
            <ui-card-description>Modal dialogs for user interaction (Radix template-based API)</ui-card-description>
          </ui-card-header>
          <ui-card-content class="space-y-4">
            <div class="space-y-2">
              <p class="text-sm font-medium">Basic Dialog</p>
              <button ui-button [rdxDialogTrigger]="dialogTemplate">Open Dialog</button>
              <ng-template #dialogTemplate>
                <div class="fixed inset-0 z-50 bg-black/80"></div>
                <div
                  rdxDialogContent
                  class="fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg"
                >
                  <div class="flex flex-col space-y-1.5 text-center sm:text-left">
                    <h2 rdxDialogTitle class="text-lg font-semibold leading-none tracking-tight">
                      Dialog Title
                    </h2>
                    <p rdxDialogDescription class="text-sm text-muted-foreground">
                      This is a basic dialog with a title, description, and action buttons.
                    </p>
                  </div>
                  <div class="py-4">
                    <p class="text-sm text-gray-600">
                      You can add any content here. Forms, text, images, or other components.
                    </p>
                  </div>
                  <div class="flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2">
                    <button ui-button variant="outline" rdxDialogClose>Cancel</button>
                    <button ui-button rdxDialogClose>Confirm</button>
                  </div>
                </div>
              </ng-template>
            </div>

            <ui-separator />

            <div class="space-y-2">
              <p class="text-sm font-medium">Confirmation Dialog</p>
              <button ui-button variant="destructive" [rdxDialogTrigger]="confirmTemplate">Delete Item</button>
              <ng-template #confirmTemplate>
                <div class="fixed inset-0 z-50 bg-black/80"></div>
                <div
                  rdxDialogContent
                  class="fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 sm:rounded-lg"
                >
                  <div class="flex flex-col space-y-1.5 text-center sm:text-left">
                    <h2 rdxDialogTitle class="text-lg font-semibold leading-none tracking-tight">
                      Are you sure?
                    </h2>
                    <p rdxDialogDescription class="text-sm text-muted-foreground">
                      This action cannot be undone. This will permanently delete the item.
                    </p>
                  </div>
                  <div class="flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2">
                    <button ui-button variant="outline" rdxDialogClose>Cancel</button>
                    <button ui-button variant="destructive" rdxDialogClose>Delete</button>
                  </div>
                </div>
              </ng-template>
            </div>
          </ui-card-content>
        </ui-card>

        <!-- Toast Examples -->
        <ui-card>
          <ui-card-header>
            <ui-card-title>Toast</ui-card-title>
            <ui-card-description>Temporary notification messages</ui-card-description>
          </ui-card-header>
          <ui-card-content class="space-y-4">
            <div class="space-y-2">
              <p class="text-sm font-medium">Toast Notifications</p>
              <p class="text-sm text-gray-500">
                Click buttons to show different toast types
              </p>
            </div>

            <div class="flex flex-wrap gap-2">
              <button ui-button (click)="showSuccessToast()">
                Show Success
              </button>
              <button ui-button variant="destructive" (click)="showErrorToast()">
                Show Error
              </button>
              <button ui-button variant="outline" (click)="showInfoToast()">
                Show Info
              </button>
              <button ui-button variant="secondary" (click)="showWarningToast()">
                Show Warning
              </button>
            </div>

            <ui-separator />

            <div class="space-y-2">
              <p class="text-sm font-medium">With Actions</p>
              <button
                ui-button
                variant="secondary"
                (click)="showActionToast()"
              >
                Show Toast with Action
              </button>
            </div>

            <ui-separator />

            <div class="space-y-2">
              <p class="text-sm font-medium">Long Duration</p>
              <button
                ui-button
                variant="outline"
                (click)="showLongToast()"
              >
                Show Long Toast
              </button>
            </div>
          </ui-card-content>
        </ui-card>

        <!-- Tooltip Examples -->
        <ui-card>
          <ui-card-header>
            <ui-card-title>Tooltip</ui-card-title>
            <ui-card-description>Contextual help on hover</ui-card-description>
          </ui-card-header>
          <ui-card-content class="space-y-6">
            <div class="space-y-2">
              <p class="text-sm font-medium">Basic Tooltips</p>
              <div class="flex flex-wrap gap-4">
                <span uiTooltipRoot>
                  <button ui-button uiTooltipTrigger>Hover me</button>
                  <div uiTooltipContent class="z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2">
                    <p>This is a tooltip!</p>
                  </div>
                </span>

                <span uiTooltipRoot>
                  <button ui-button variant="outline" uiTooltipTrigger>With description</button>
                  <div uiTooltipContent class="z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2">
                    <div class="space-y-1">
                      <p class="font-semibold">Tooltip Title</p>
                      <p class="text-xs">Additional description text</p>
                    </div>
                  </div>
                </span>

                <span uiTooltipRoot>
                  <button ui-button variant="secondary" uiTooltipTrigger>Info button</button>
                  <div uiTooltipContent class="z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2">
                    <p>Get more information here</p>
                  </div>
                </span>
              </div>
            </div>

            <ui-separator />

            <div class="space-y-2">
              <p class="text-sm font-medium">Icon with Tooltip</p>
              <div class="flex gap-4">
                <span uiTooltipRoot>
                  <button class="p-2 rounded hover:bg-gray-100" uiTooltipTrigger>
                    <svg class="h-5 w-5 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"></circle>
                      <path d="M12 16v-4"></path>
                      <path d="M12 8h.01"></path>
                    </svg>
                  </button>
                  <div uiTooltipContent class="z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2">
                    <p>Information tooltip</p>
                  </div>
                </span>

                <span uiTooltipRoot>
                  <button class="p-2 rounded hover:bg-gray-100" uiTooltipTrigger>
                    <svg class="h-5 w-5 text-green-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                      <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                  </button>
                  <div uiTooltipContent class="z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2">
                    <p>Success indicator</p>
                  </div>
                </span>

                <span uiTooltipRoot>
                  <button class="p-2 rounded hover:bg-gray-100" uiTooltipTrigger>
                    <svg class="h-5 w-5 text-yellow-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"></circle>
                      <line x1="12" y1="8" x2="12" y2="12"></line>
                      <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                  </button>
                  <div uiTooltipContent class="z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2">
                    <p>Warning message</p>
                  </div>
                </span>

                <span uiTooltipRoot>
                  <button class="p-2 rounded hover:bg-gray-100" uiTooltipTrigger>
                    <svg class="h-5 w-5 text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"></circle>
                      <line x1="15" y1="9" x2="9" y2="15"></line>
                      <line x1="9" y1="9" x2="15" y2="15"></line>
                    </svg>
                  </button>
                  <div uiTooltipContent class="z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2">
                    <p>Error notification</p>
                  </div>
                </span>
              </div>
            </div>

            <ui-separator />

            <div class="space-y-2">
              <p class="text-sm font-medium">Text with Tooltip</p>
              <p class="text-sm text-gray-600">
                You can hover over
                <span uiTooltipRoot class="inline-block">
                  <span class="underline decoration-dotted cursor-help text-blue-600" uiTooltipTrigger>
                    this text
                  </span>
                  <div uiTooltipContent class="z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2">
                    <p>This is inline tooltip content</p>
                  </div>
                </span>
                to see more information.
              </p>
            </div>
          </ui-card-content>
        </ui-card>

        <!-- Combined Example -->
        <ui-card class="md:col-span-2">
          <ui-card-header>
            <ui-card-title>Combined Feedback Demo</ui-card-title>
            <ui-card-description>Using multiple feedback components together</ui-card-description>
          </ui-card-header>
          <ui-card-content class="space-y-4">
            <ui-alert>
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M12 16v-4"></path>
                <path d="M12 8h.01"></path>
              </svg>
              <ui-alert-title>Welcome!</ui-alert-title>
              <ui-alert-description>
                Try the interactive examples below to see how feedback components work together.
              </ui-alert-description>
            </ui-alert>

            <div class="flex flex-wrap gap-3">
              <span rdxTooltip>
                <button ui-button variant="outline" rdxTooltipTrigger>
                  Hover for info
                </button>
                <div rdxTooltipContentWrapper side="top" class="z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md">
                  <div rdxTooltipContent>
                    <p>This button shows helpful information</p>
                  </div>
                </div>
              </span>

              <button
                ui-button
                variant="secondary"
                (click)="showQuickToast()"
              >
                Trigger Toast
              </button>
            </div>
          </ui-card-content>
        </ui-card>
      </div>
    </div>
  `,
})
export class FeedbackComponent {
  showSuccessToast() {
    toast.success('Your action was completed successfully!', {
      description: 'Everything went as expected.',
    });
  }

  showErrorToast() {
    toast.error('Something went wrong!', {
      description: 'Please try again later.',
    });
  }

  showInfoToast() {
    toast.info('Useful information', {
      description: 'Here is some helpful information for you.',
    });
  }

  showWarningToast() {
    toast.warning('Warning!', {
      description: 'Please review your input before proceeding.',
    });
  }

  showActionToast() {
    toast('Action Required', {
      description: 'You have a pending task to complete.',
      action: {
        label: 'Undo',
        onClick: () => console.log('Undo clicked'),
      },
    });
  }

  showLongToast() {
    toast('Persistent Message', {
      description: 'This toast will stay for 10 seconds.',
      duration: 10000,
    });
  }

  showQuickToast() {
    toast.success('Quick Action', {
      description: 'Action completed successfully!',
      duration: 3000,
    });
  }
}
